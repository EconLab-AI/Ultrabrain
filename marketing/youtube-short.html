<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>UltraBrain - YouTube Short</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap');

*{margin:0;padding:0;box-sizing:border-box}

:root{
  --glow-purple:#a78bfa;
  --glow-cyan:#22d3ee;
  --glow-pink:#fb7185;
  --bg:#050508;
}

html,body{
  width:100%;height:100%;overflow:hidden;
  background:var(--bg);color:#fff;
  font-family:'Inter',system-ui,sans-serif;
}

/* ===== 9:16 FRAME ===== */
.frame{
  position:fixed;
  top:50%;left:50%;transform:translate(-50%,-50%);
  height:100vh;
  width:calc(100vh * 9 / 16);
  max-width:100vw;
  max-height:calc(100vw * 16 / 9);
  background:var(--bg);
  overflow:hidden;
}

canvas#scene{position:absolute;top:0;left:0;width:100%;height:100%}

/* ===== SUBTITLE SYSTEM ===== */
.subtitle-container{
  position:absolute;
  bottom:22%;left:0;width:100%;
  z-index:50;
  display:flex;justify-content:center;
  padding:0 7%;
  pointer-events:none;
}

.subtitle{
  text-align:center;
  opacity:0;
  transform:scale(0.85) translateY(15px);
  transition:all 0.35s cubic-bezier(.34,1.56,.64,1);
}
.subtitle.visible{
  opacity:1;
  transform:scale(1) translateY(0);
}
.subtitle.exit{
  opacity:0;
  transform:scale(0.9) translateY(-10px);
  transition:all 0.25s ease-in;
}

.sub-line{
  display:inline;
  font-weight:800;
  font-size:clamp(1.8rem, 6.5vh, 3.2rem);
  line-height:1.3;
  letter-spacing:-0.02em;
  color:#fff;
  text-shadow:
    0 0 24px rgba(0,0,0,0.95),
    0 2px 10px rgba(0,0,0,0.85),
    0 0 50px rgba(0,0,0,0.5);
}

/* Highlighted words - BRIGHT colored against white text */
.sub-line .hl{
  background:linear-gradient(135deg,#c4b5fd,#67e8f9);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;
  filter:drop-shadow(0 0 14px rgba(167,139,250,0.65));
}
.sub-line .hl-pink{
  background:linear-gradient(135deg,#fda4af,#fb7185);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;
  filter:drop-shadow(0 0 14px rgba(251,113,133,0.65));
}
.sub-line .hl-cyan{
  background:linear-gradient(135deg,#67e8f9,#22d3ee);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;
  filter:drop-shadow(0 0 14px rgba(34,211,238,0.65));
}

/* Big impact number */
.stat-impact{
  font-size:clamp(3.5rem,11vh,7rem);
  font-weight:900;
  font-family:'JetBrains Mono',monospace;
  background:linear-gradient(135deg,#67e8f9,#c4b5fd);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;
  filter:drop-shadow(0 0 24px rgba(34,211,238,0.6));
  display:block;
  animation:none;
}
.stat-impact.pop{
  animation:popIn 0.4s cubic-bezier(.34,1.56,.64,1);
}
@keyframes popIn{
  0%{transform:scale(0.3);opacity:0}
  100%{transform:scale(1);opacity:1}
}

.stat-label{
  font-size:clamp(0.85rem,2.5vh,1.3rem);
  font-weight:600;
  color:rgba(255,255,255,0.8);
  margin-top:6px;
  letter-spacing:0.06em;
  text-transform:uppercase;
}

/* Terminal line */
.terminal-sub{
  background:rgba(10,10,20,0.88);
  border:1px solid rgba(167,139,250,0.25);
  border-radius:12px;
  padding:14px 22px;
  font-family:'JetBrains Mono',monospace;
  font-size:clamp(0.75rem,2.2vh,1.05rem);
  backdrop-filter:blur(10px);
  display:inline-block;
  text-align:left;
  box-shadow:0 0 30px rgba(167,139,250,0.1);
}
.terminal-sub .prompt{color:var(--glow-cyan)}
.terminal-sub .cursor{
  display:inline-block;width:8px;height:1.1em;
  background:var(--glow-purple);vertical-align:text-bottom;
  animation:blink 0.7s step-end infinite;
}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}

/* Branding header */
.branding{
  position:absolute;top:0;left:0;width:100%;z-index:40;
  display:flex;flex-direction:column;align-items:center;
  padding:16px 12px 12px;
  pointer-events:none;
  background:linear-gradient(180deg,rgba(5,5,8,0.92) 0%,rgba(5,5,8,0.55) 55%,transparent 100%);
}
.branding-logo{
  width:clamp(140px,35vw,200px);height:auto;
  margin-bottom:10px;
  opacity:0.9;
  filter:drop-shadow(0 0 10px rgba(255,255,255,0.4));
}
.branding-name{
  font-family:'Inter',system-ui,sans-serif;
  font-weight:300;font-size:clamp(1rem,3.2vh,1.4rem);
  letter-spacing:0.25em;
  color:#fff;
  text-shadow:0 0 20px rgba(255,255,255,0.1);
  margin-bottom:2px;
}
.branding-slogan{
  font-family:'JetBrains Mono',monospace;
  font-size:clamp(0.38rem,1.1vh,0.5rem);
  letter-spacing:0.12em;
  color:rgba(255,255,255,0.35);
  text-transform:uppercase;
}

/* Feature pills row */
.feature-pills{
  position:absolute;
  bottom:32%;left:0;width:100%;
  z-index:45;
  display:flex;justify-content:center;gap:6px;flex-wrap:wrap;
  padding:0 6%;
  pointer-events:none;
  opacity:0;
  transition:opacity 0.5s ease;
}
.feature-pills.visible{opacity:1}
.feature-pill{
  padding:6px 14px;border-radius:100px;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.22);
  font-size:clamp(0.55rem,1.5vh,0.72rem);
  font-family:'JetBrains Mono',monospace;
  color:rgba(255,255,255,0.82);
  white-space:nowrap;
  transform:translateY(8px);opacity:0;
  transition:all 0.35s ease;
  text-shadow:0 0 8px rgba(255,255,255,0.15);
}
.feature-pill.visible{transform:translateY(0);opacity:1}

/* CTA overlay */
.cta-overlay{
  position:absolute;bottom:7%;left:0;width:100%;
  text-align:center;z-index:50;
  opacity:0;transform:translateY(20px);
  transition:all 0.6s cubic-bezier(.25,.1,.25,1);
  pointer-events:auto;
}
.cta-overlay.visible{opacity:1;transform:translateY(0)}
.cta-btn{
  display:inline-flex;align-items:center;gap:8px;
  padding:13px 30px;border-radius:12px;
  background:linear-gradient(135deg,var(--glow-purple),#7c6aff);
  color:#fff;font-weight:700;font-size:0.95rem;
  text-decoration:none;border:none;cursor:pointer;
  box-shadow:0 0 40px rgba(167,139,250,0.4), 0 4px 16px rgba(0,0,0,0.3);
  font-family:'Inter',sans-serif;
}
.cta-btn svg{width:18px;height:18px}
.cta-sub{
  margin-top:10px;font-size:0.65rem;color:rgba(255,255,255,0.45);
  font-family:'JetBrains Mono',monospace;
}

/* Progress bar */
.progress{
  position:absolute;top:0;left:0;height:3px;
  background:linear-gradient(90deg,var(--glow-purple),var(--glow-cyan));
  z-index:60;transition:width 0.1s linear;
  box-shadow:0 0 12px rgba(167,139,250,0.5);
}

/* ===== TELEPROMPTER ===== */
.teleprompter{
  position:fixed;top:0;right:0;
  width:320px;height:100vh;
  background:rgba(0,0,0,0.95);
  border-left:1px solid rgba(167,139,250,0.2);
  z-index:1000;
  padding:20px;overflow-y:auto;
  font-family:'Inter',sans-serif;
  display:none;
}
.teleprompter.active{display:block}
.teleprompter h3{
  font-size:0.8rem;color:var(--glow-purple);
  text-transform:uppercase;letter-spacing:0.1em;
  margin-bottom:16px;
}
.tp-line{
  padding:10px 12px;margin-bottom:8px;
  border-radius:8px;border-left:3px solid transparent;
  font-size:0.85rem;line-height:1.5;
  color:rgba(255,255,255,0.5);
  transition:all 0.3s ease;
}
.tp-line.active{
  background:rgba(167,139,250,0.1);
  border-left-color:var(--glow-purple);
  color:#fff;
}
.tp-line .tp-time{
  font-family:'JetBrains Mono',monospace;
  font-size:0.65rem;color:var(--glow-cyan);
  margin-bottom:4px;display:block;
}

/* Controls */
.controls{
  position:fixed;bottom:10px;left:50%;transform:translateX(-50%);
  z-index:200;display:flex;gap:8px;
  opacity:0.3;transition:opacity 0.3s;
}
.controls:hover{opacity:1}
.ctrl-btn{
  padding:6px 14px;border-radius:6px;
  background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);
  color:#aaa;font-size:0.65rem;cursor:pointer;
  font-family:'JetBrains Mono',monospace;
  transition:all 0.2s;
}
.ctrl-btn:hover{background:rgba(255,255,255,0.15);color:#fff}
.ctrl-btn.active{background:rgba(167,139,250,0.2);border-color:var(--glow-purple);color:var(--glow-purple)}
</style>
</head>
<body>

<div class="frame" id="frame">
  <canvas id="scene"></canvas>
  <div class="progress" id="progress"></div>

  <!-- Branding Header -->
  <div class="branding" id="branding">
    <img class="branding-logo" alt="EconLab" src="data:image/png;base64,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"/>
    <div class="branding-name">ULTRABRAIN</div>
    <div class="branding-slogan">Persistent Semantic Memory for Claude Code</div>
  </div>

  <!-- Feature pills (shown during stats phase) -->
  <div class="feature-pills" id="featurePills">
    <div class="feature-pill">Vector Search</div>
    <div class="feature-pill">3D Brain UI</div>
    <div class="feature-pill">MCP Server</div>
    <div class="feature-pill">Zero Python</div>
    <div class="feature-pill">Open Source</div>
  </div>

  <!-- Subtitle area -->
  <div class="subtitle-container">
    <div class="subtitle" id="subtitle"></div>
  </div>

  <!-- CTA -->
  <div class="cta-overlay" id="cta">
    <a class="cta-btn" href="https://github.com/EconLab-AI/Ultrabrain" target="_blank">
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
      Star on GitHub
    </a>
    <div class="cta-sub">Open Source &middot; Free &middot; npm i ultrabrain</div>
  </div>
</div>

<!-- Teleprompter panel -->
<div class="teleprompter" id="teleprompter">
  <h3>Voiceover Script</h3>
  <div id="tpLines"></div>
</div>

<!-- Controls -->
<div class="controls">
  <button class="ctrl-btn" onclick="restart()">Restart</button>
  <button class="ctrl-btn" id="btnPause" onclick="togglePause()">Pause</button>
  <button class="ctrl-btn" id="btnTp" onclick="toggleTeleprompter()">Teleprompter</button>
</div>

<script type="importmap">
{"imports":{"three":"https://cdn.jsdelivr.net/npm/three@0.162.0/build/three.module.js"}}
</script>

<script type="module">
import * as THREE from 'three';

// ─────────────────────────────────────────
// SUBTITLE SCRIPT
// Use <span class="hl"> for purple/cyan highlight
// Use <span class="hl-pink"> for pink highlight
// Use <span class="hl-cyan"> for cyan highlight
// ─────────────────────────────────────────
const SCRIPT = [
  // --- HOOK (0-4s) ---
  {
    t: 500, dur: 2200,
    html: `<span class="sub-line">Your AI has <span class="hl-pink">amnesia.</span></span>`,
    voice: "Your AI has amnesia."
  },
  {
    t: 3000, dur: 2200,
    html: `<span class="sub-line">Every session starts from <span class="hl">zero.</span></span>`,
    voice: "Every single session starts from zero."
  },

  // --- PROBLEM (5-9s) ---
  {
    t: 5500, dur: 2500,
    html: `<span class="sub-line">It forgets your <span class="hl-cyan">architecture.</span></span>`,
    voice: "It forgets your architecture."
  },
  {
    t: 8300, dur: 2200,
    html: `<span class="sub-line">Your bugs. Your <span class="hl-pink">decisions.</span></span>`,
    voice: "Your bugs. Your decisions."
  },

  // --- TURN (10-13s) ---
  {
    t: 11000, dur: 2500,
    html: `<span class="sub-line">So we gave it a <span class="hl">brain.</span></span>`,
    voice: "So we gave it a brain."
  },

  // --- PRODUCT REVEAL (14-17s) ---
  {
    t: 14000, dur: 2800,
    html: `<span class="sub-line"><span class="hl">UltraBrain.</span><br/>Persistent memory for Claude.</span>`,
    voice: "UltraBrain. Persistent semantic memory for Claude."
  },

  // --- STATS (18-26s) ---
  {
    t: 17500, dur: 2200,
    html: `<span class="stat-impact pop">&lt;1.3ms</span><span class="stat-label">search latency</span>`,
    voice: "Sub 1.3 millisecond search."
  },
  {
    t: 20000, dur: 2200,
    html: `<span class="stat-impact pop">80%</span><span class="stat-label">token savings</span>`,
    voice: "80 percent token savings."
  },
  {
    t: 22500, dur: 2200,
    html: `<span class="stat-impact pop">&lt;2 min</span><span class="stat-label">setup time</span>`,
    voice: "Less than 2 minutes to set up."
  },

  // --- HOW (25-29s) ---
  {
    t: 25200, dur: 3200,
    html: `<span class="sub-line">It <span class="hl-cyan">watches</span> what you build.<br/>And <span class="hl">remembers</span> everything.</span>`,
    voice: "It watches what you build. And remembers everything."
  },

  // --- INSTALL (29-33s) ---
  {
    t: 28800, dur: 3500,
    html: `<div class="terminal-sub"><span class="prompt">$ </span>claude plugin install ultrabrain<span class="cursor"></span></div>`,
    voice: "One command to install."
  },

  // --- CTA (33-37s) ---
  {
    t: 32800, dur: 2500,
    html: `<span class="sub-line"><span class="hl">Open source.</span> Free. <span class="hl-cyan">Now.</span></span>`,
    voice: "Open source. Free. Right now."
  },

  // --- FINAL (36s+) ---
  {
    t: 35500, dur: 4000,
    html: `<span class="sub-line">Give your AI a <span class="hl">brain.</span></span>`,
    voice: "Give your AI a brain."
  },
];

const TOTAL_DURATION = 40000;

// ─── RENDERER ───
const frame = document.getElementById('frame');
const canvas = document.getElementById('scene');
const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: false });
renderer.toneMapping = THREE.ACESFilmicToneMapping;
renderer.toneMappingExposure = 1.3;

function resize() {
  const w = frame.clientWidth;
  const h = frame.clientHeight;
  renderer.setSize(w, h);
  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
  camera.aspect = w / h;
  camera.updateProjectionMatrix();
}

const scene = new THREE.Scene();
scene.background = new THREE.Color(0x050508);
scene.fog = new THREE.FogExp2(0x050508, 0.035);

const camera = new THREE.PerspectiveCamera(50, 9/16, 0.1, 100);
camera.position.set(0, 0, 8);

// ─── LIGHTS (match Brain3DScene: clean white) ───
const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
scene.add(ambientLight);
const keyLight = new THREE.DirectionalLight(0xffffff, 0.8);
keyLight.position.set(2, 2, 3);
scene.add(keyLight);
const fillLight = new THREE.DirectionalLight(0xcccccc, 0.4);
fillLight.position.set(-2, -1, 2);
scene.add(fillLight);

// ─── BRAIN ───
const brainGroup = new THREE.Group();
const BRAIN_R = 2.2;

function makeHemi(side) {
  const isLeft = side === 'left';
  const geo = new THREE.SphereGeometry(BRAIN_R, 64, 48,
    isLeft ? Math.PI/2 : 0, Math.PI, 0, Math.PI);
  const pos = geo.attributes.position;
  for (let i = 0; i < pos.count; i++) {
    let x = pos.getX(i), y = pos.getY(i), z = pos.getZ(i);
    const f = Math.sin(y*5)*0.07 + Math.sin(y*2.5+x*1.8)*0.05
            + Math.cos(z*3.5+y*1.5)*0.04 + Math.sin(x*4+z*2)*0.025;
    const r = Math.sqrt(x*x+y*y+z*z);
    if(r>0){const s=1+f/r; pos.setXYZ(i,x*s,y*s,z*s);}
  }
  geo.computeVertexNormals();
  const mat = new THREE.MeshStandardMaterial({
    color:0xe0e0e0, roughness:0.65, metalness:0.15,
    transparent:true, opacity:0, side:THREE.DoubleSide
  });
  const m = new THREE.Mesh(geo, mat);
  m.position.x = isLeft ? -0.12 : 0.12;
  return m;
}
const leftH = makeHemi('left'), rightH = makeHemi('right');
brainGroup.add(leftH, rightH);
scene.add(brainGroup);

// ─── NODES (exact 12 from Brain3DScene.tsx) ───
const SCALE = 3.3;
const NODE_POSITIONS_BRAIN = [
  [-0.8*SCALE, 0.8*SCALE, 0.3*SCALE],
  [0.8*SCALE, 0.8*SCALE, 0.3*SCALE],
  [-1.0*SCALE, 0, 0.2*SCALE],
  [1.0*SCALE, 0, 0.2*SCALE],
  [-0.8*SCALE, -0.8*SCALE, 0.3*SCALE],
  [0.8*SCALE, -0.8*SCALE, 0.3*SCALE],
  [-0.5*SCALE, 0.4*SCALE, -0.4*SCALE],
  [0.5*SCALE, 0.4*SCALE, -0.4*SCALE],
  [-0.5*SCALE, -0.4*SCALE, -0.4*SCALE],
  [0.5*SCALE, -0.4*SCALE, -0.4*SCALE],
  [0, 0.6*SCALE, 0.5*SCALE],
  [0, -0.6*SCALE, 0.5*SCALE],
];
const NODE_N = NODE_POSITIONS_BRAIN.length;
const nodePos = [], nodeMeshes = [];
const nodeGrp = new THREE.Group();
for(let i=0;i<NODE_N;i++){
  const p = NODE_POSITIONS_BRAIN[i];
  const v = new THREE.Vector3(p[0], p[1], p[2]);
  nodePos.push(v);
  const sz = i < 6 ? 0.13 : 0.10;
  const mat = new THREE.MeshStandardMaterial({
    color:0xffffff,
    emissive:0xffffff,
    emissiveIntensity:0, transparent:true, opacity:0
  });
  const m = new THREE.Mesh(new THREE.SphereGeometry(sz,12,12), mat);
  m.position.copy(v);
  m.userData = { phase: Math.random()*Math.PI*2 };
  nodeMeshes.push(m);
  nodeGrp.add(m);
}
scene.add(nodeGrp);

// ─── CONNECTIONS (exact 21 from Brain3DScene.tsx) ───
const CONNECTIONS_BRAIN = [
  [0, 6], [1, 7], [2, 8], [3, 9],
  [4, 8], [5, 9], [6, 7], [8, 9],
  [0, 10], [1, 10], [10, 11],
  [4, 11], [5, 11], [6, 8], [7, 9],
  [2, 6], [3, 7], [0, 2], [1, 3],
  [2, 4], [3, 5],
];
const connLines = [];
const connGrp = new THREE.Group();
for(let i=0;i<CONNECTIONS_BRAIN.length;i++){
  const [a, b] = CONNECTIONS_BRAIN[i];
  const mid = new THREE.Vector3().addVectors(nodePos[a],nodePos[b]).multiplyScalar(0.35);
  const curve = new THREE.QuadraticBezierCurve3(nodePos[a],mid,nodePos[b]);
  const geo = new THREE.BufferGeometry().setFromPoints(curve.getPoints(16));
  const mat = new THREE.LineBasicMaterial({
    color:0xffffff, transparent:true, opacity:0
  });
  const line = new THREE.Line(geo, mat);
  line.userData = { phase: Math.random()*Math.PI*2 };
  connLines.push(line);
  connGrp.add(line);
}
scene.add(connGrp);

// ─── PARTICLES ───
const P_COUNT = 2000;
const pGeo = new THREE.BufferGeometry();
const pPos = new Float32Array(P_COUNT*3);
const pSpd = new Float32Array(P_COUNT);
for(let i=0;i<P_COUNT;i++){
  const th=Math.random()*Math.PI*2, ph=Math.acos(2*Math.random()-1);
  const r=BRAIN_R*(1.3+Math.random()*2.5);
  pPos[i*3]=r*Math.sin(ph)*Math.cos(th);
  pPos[i*3+1]=r*Math.sin(ph)*Math.sin(th);
  pPos[i*3+2]=r*Math.cos(ph);
  pSpd[i]=0.2+Math.random()*0.8;
}
pGeo.setAttribute('position',new THREE.BufferAttribute(pPos,3));
const pMat = new THREE.PointsMaterial({
  color:0xffffff, size:0.015, transparent:true, opacity:0,
  blending:THREE.AdditiveBlending, sizeAttenuation:true
});
const particles = new THREE.Points(pGeo, pMat);
scene.add(particles);

// ─── CORE GLOW ───
const coreMat = new THREE.MeshStandardMaterial({
  color:0xffffff, emissive:0xffffff,
  emissiveIntensity:0, transparent:true, opacity:0
});
const core = new THREE.Mesh(new THREE.SphereGeometry(0.3,32,32), coreMat);
scene.add(core);

// ─── PULSE RINGS ───
const ringMat = new THREE.MeshBasicMaterial({
  color:0xffffff, transparent:true, opacity:0, side:THREE.DoubleSide
});
const ring = new THREE.Mesh(new THREE.RingGeometry(0.4,0.45,64), ringMat);
scene.add(ring);

// ─── ANIMATION STATE ───
let startTime = Date.now();
let paused = false;
let pauseOffset = 0;
let currentSubIdx = -1;
let featurePillsShown = false;

const $sub = document.getElementById('subtitle');
const $progress = document.getElementById('progress');
const $cta = document.getElementById('cta');
const $featurePills = document.getElementById('featurePills');
const featurePillEls = document.querySelectorAll('.feature-pill');

// Visual phases based on elapsed time
function brainPhase(el) {
  if (el < 10000) return 0;   // dark, only particles hint
  if (el < 13500) return 1;   // brain starts forming
  if (el < 17000) return 2;   // brain visible, nodes appear
  if (el < 25000) return 3;   // full glory, stats
  return 4;                   // cta
}

// ─── SUBTITLE ENGINE ───
function updateSubtitles(elapsed) {
  let activeIdx = -1;
  for (let i = SCRIPT.length - 1; i >= 0; i--) {
    const s = SCRIPT[i];
    if (elapsed >= s.t && elapsed < s.t + s.dur) {
      activeIdx = i;
      break;
    }
  }

  if (activeIdx !== currentSubIdx) {
    if (activeIdx === -1) {
      $sub.className = 'subtitle exit';
    } else {
      $sub.className = 'subtitle exit';
      setTimeout(() => {
        $sub.innerHTML = SCRIPT[activeIdx].html;
        $sub.className = 'subtitle visible';
      }, activeIdx > currentSubIdx ? 150 : 50);
    }
    currentSubIdx = activeIdx;

    // Teleprompter highlight
    document.querySelectorAll('.tp-line').forEach((el, i) => {
      el.classList.toggle('active', i === activeIdx);
    });
    if (activeIdx >= 0) {
      const activeLine = document.querySelectorAll('.tp-line')[activeIdx];
      if (activeLine) activeLine.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  }

  // Show feature pills during stats phase (17.5s - 25s)
  if (!featurePillsShown && elapsed > 17500) {
    featurePillsShown = true;
    $featurePills.classList.add('visible');
    featurePillEls.forEach((pill, i) => {
      setTimeout(() => pill.classList.add('visible'), i * 100);
    });
  }
}

// ─── TELEPROMPTER ───
function buildTeleprompter() {
  const container = document.getElementById('tpLines');
  SCRIPT.forEach((s) => {
    const div = document.createElement('div');
    div.className = 'tp-line';
    const sec = (s.t / 1000).toFixed(1);
    const end = ((s.t + s.dur) / 1000).toFixed(1);
    div.innerHTML = `<span class="tp-time">${sec}s - ${end}s</span>${s.voice}`;
    container.appendChild(div);
  });
}
buildTeleprompter();

// ─── CONTROLS ───
window.restart = function() {
  startTime = Date.now();
  pauseOffset = 0;
  paused = false;
  currentSubIdx = -1;
  featurePillsShown = false;
  $sub.className = 'subtitle';
  $cta.classList.remove('visible');
  $featurePills.classList.remove('visible');
  featurePillEls.forEach(p => p.classList.remove('visible'));
  document.getElementById('btnPause').textContent = 'Pause';
};

window.togglePause = function() {
  if (paused) {
    startTime = Date.now() - pauseOffset;
    paused = false;
    document.getElementById('btnPause').textContent = 'Pause';
  } else {
    pauseOffset = Date.now() - startTime;
    paused = true;
    document.getElementById('btnPause').textContent = 'Play';
  }
};

window.toggleTeleprompter = function() {
  const tp = document.getElementById('teleprompter');
  const btn = document.getElementById('btnTp');
  tp.classList.toggle('active');
  btn.classList.toggle('active');
};

// ─── RENDER LOOP ───
resize();
window.addEventListener('resize', resize);

function animate() {
  requestAnimationFrame(animate);
  if (paused) { renderer.render(scene, camera); return; }

  const elapsed = Date.now() - startTime;
  const t = elapsed * 0.001;
  const bp = brainPhase(elapsed);

  // Progress bar
  const pct = Math.min(100, (elapsed / TOTAL_DURATION) * 100);
  $progress.style.width = pct + '%';

  // Subtitles
  updateSubtitles(elapsed);

  // CTA
  if (elapsed > 33000) $cta.classList.add('visible');

  // ─── BRAIN ANIMATION ───
  const brainOp = bp >= 2 ? Math.min(0.9, (elapsed-13500)/2000*0.9) :
                  bp >= 1 ? Math.min(0.2, (elapsed-10000)/2000*0.2) : 0;
  leftH.material.opacity = brainOp;
  rightH.material.opacity = brainOp * 0.82;

  const rotSpd = bp >= 2 ? 0.18 : bp >= 1 ? 0.08 : 0.03;
  brainGroup.rotation.y += rotSpd * 0.016;
  brainGroup.rotation.x = Math.sin(t * 0.25) * 0.12;

  // Nodes
  const nodeOp = bp >= 2 ? Math.min(1, (elapsed-13500)/1200) : 0;
  nodeMeshes.forEach(m => {
    m.material.opacity = nodeOp * (0.6 + Math.sin(t*2+m.userData.phase)*0.2);
    m.material.emissiveIntensity = nodeOp * (0.2 + Math.sin(t*3+m.userData.phase)*0.1);
    const a = rotSpd * 0.016;
    const x = m.position.x, z = m.position.z;
    m.position.x = x*Math.cos(a) - z*Math.sin(a);
    m.position.z = x*Math.sin(a) + z*Math.cos(a);
  });

  // Connections
  const connOp = bp >= 2 ? Math.min(1, (elapsed-14000)/2000) : 0;
  connLines.forEach(l => {
    l.material.opacity = connOp * (0.08 + Math.sin(t*1.5+l.userData.phase)*0.16);
  });
  connGrp.rotation.y = brainGroup.rotation.y;
  connGrp.rotation.x = brainGroup.rotation.x;

  // Particles
  const ppOp = bp >= 1 ? Math.min(0.35, (elapsed-10000)/3000*0.35) :
               elapsed > 3000 ? Math.min(0.12, (elapsed-3000)/3000*0.12) : 0;
  pMat.opacity = ppOp;
  const pa = particles.geometry.attributes.position.array;
  for(let i=0;i<P_COUNT;i++){
    const s=pSpd[i], a=s*0.003;
    const x=pa[i*3], z=pa[i*3+2];
    pa[i*3]=x*Math.cos(a)-z*Math.sin(a);
    pa[i*3+2]=x*Math.sin(a)+z*Math.cos(a);
    pa[i*3+1]+=Math.sin(t*s+i)*0.001;
  }
  if(bp>=2){
    for(let i=0;i<P_COUNT;i++){
      const x=pa[i*3],y=pa[i*3+1],z=pa[i*3+2];
      const d=Math.sqrt(x*x+y*y+z*z);
      if(d>BRAIN_R*1.0){
        const pull=0.003*pSpd[i];
        pa[i*3]-=(x/d)*pull;pa[i*3+1]-=(y/d)*pull;pa[i*3+2]-=(z/d)*pull;
      }
    }
  }
  particles.geometry.attributes.position.needsUpdate=true;

  // Core
  const coreI = bp >= 2 ? Math.min(1, (elapsed-13500)/800) : 0;
  coreMat.opacity = coreI * 0.5;
  coreMat.emissiveIntensity = coreI * (1.5 + Math.sin(t*2)*0.5);

  // Pulse ring
  if(bp>=2){
    const pt=((elapsed-13500)%2500)/2500;
    ring.scale.setScalar(1+pt*6);
    ringMat.opacity=(1-pt)*0.3*coreI;
    ring.lookAt(camera.position);
  }

  // Camera movement
  if(bp<1){
    camera.position.z = 8;
    camera.position.x = Math.sin(t*0.15)*0.2;
    camera.position.y = Math.cos(t*0.12)*0.15;
  } else if(bp===1){
    camera.position.z = Math.max(6, 8-(elapsed-10000)*0.001);
  } else {
    camera.position.z = Math.max(5, 6-(elapsed-13500)*0.0003);
    camera.position.x = Math.sin(t*0.2)*0.4;
    camera.position.y = Math.cos(t*0.15)*0.25;
  }
  camera.lookAt(0,0,0);

  // Lights
  keyLight.intensity = 0.8 + Math.sin(t*1.5)*0.1;

  renderer.render(scene, camera);
}

animate();
</script>

</body>
</html>
